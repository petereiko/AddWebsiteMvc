@using AddWebsiteMvc.Business.Models.Election
@model CandidateDto
@inject IConfiguration _config;
@inject IWebHostEnvironment _env;
@{
    ViewData["Title"] = "Edit";
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
    string passportPath = $"{_env.WebRootPath}/Passports/";
}
<link rel="stylesheet"
      href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" />
<link rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/css/bootstrap-datepicker.min.css" />
<style>
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }

    body {
        font-family: "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
        background: #f8f9fa;
    }

    .container-wrapper {
        max-width: 900px;
        margin: 0 auto;
        padding: 30px 20px;
    }

    .page-header {
        background: linear-gradient(135deg, #16a34a 0%, #15803d 100%);
        padding: 40px;
        border-radius: 12px;
        box-shadow: 0 4px 16px rgba(22, 163, 74, 0.2);
        margin-bottom: 30px;
        text-align: center;
    }

        .page-header h1 {
            font-size: 2.2em;
            color: white;
            font-weight: 700;
            margin: 0 0 10px 0;
            letter-spacing: -0.5px;
        }

        .page-header h4 {
            font-size: 1.1em;
            color: rgba(255, 255, 255, 0.9);
            font-weight: 500;
            margin: 0;
        }

    .form-container {
        background: white;
        padding: 50px;
        border-radius: 12px;
        box-shadow: 0 2px 12px rgba(0, 0, 0, 0.08);
    }

    .form-section {
        margin-bottom: 30px;
    }

    .form-group {
        margin-bottom: 25px;
    }

        .form-group label {
            display: block;
            font-weight: 600;
            color: #374151;
            margin-bottom: 8px;
            font-size: 0.95em;
            letter-spacing: 0.3px;
        }

            .form-group label::after {
                content: " *";
                color: #dc2626;
                font-weight: 700;
            }

        .form-group .control-label {
            text-transform: capitalize;
        }

    .form-control {
        width: 100%;
        padding: 14px 16px;
        border: 2px solid #e5e7eb;
        border-radius: 8px;
        font-size: 0.95em;
        transition: all 0.3s ease;
        outline: none;
        font-family: inherit;
    }

        .form-control:focus {
            border-color: #16a34a;
            box-shadow: 0 0 0 4px rgba(22, 163, 74, 0.1);
        }

        .form-control:hover {
            border-color: #d1d5db;
        }

        .form-control::placeholder {
            color: #9ca3af;
        }

    .text-danger {
        color: #dc2626;
        font-size: 0.85em;
        margin-top: 6px;
        display: block;
        font-weight: 500;
    }

    .validation-summary-errors {
        background: #fee2e2;
        border-left: 4px solid #dc2626;
        padding: 16px 20px;
        border-radius: 8px;
        margin-bottom: 25px;
    }

        .validation-summary-errors ul {
            list-style: none;
            margin: 0;
            padding: 0;
        }

            .validation-summary-errors ul li {
                color: #991b1b;
                font-weight: 500;
                margin-bottom: 5px;
            }

                .validation-summary-errors ul li:last-child {
                    margin-bottom: 0;
                }

    .form-row {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 20px;
    }

    .btn-group {
        display: flex;
        gap: 15px;
        margin-top: 35px;
        padding-top: 25px;
        border-top: 2px solid #f3f4f6;
    }

    .btn {
        padding: 14px 32px;
        border: none;
        border-radius: 8px;
        font-size: 0.95em;
        font-weight: 700;
        cursor: pointer;
        transition: all 0.3s ease;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        text-decoration: none;
        display: inline-block;
        text-align: center;
    }

    .btn-primary {
        background: linear-gradient(135deg, #16a34a 0%, #15803d 100%);
        color: white;
        box-shadow: 0 4px 12px rgba(22, 163, 74, 0.3);
    }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(22, 163, 74, 0.4);
        }

        .btn-primary:active {
            transform: translateY(0);
        }

    .btn-secondary {
        background: white;
        color: #374151;
        border: 2px solid #e5e7eb;
    }

        .btn-secondary:hover {
            background: #f9fafb;
            border-color: #d1d5db;
            transform: translateY(-2px);
        }

    .back-link {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        color: #16a34a;
        text-decoration: none;
        font-weight: 600;
        margin-top: 20px;
        transition: all 0.3s ease;
        font-size: 0.95em;
    }

        .back-link:hover {
            color: #15803d;
            gap: 12px;
        }

        .back-link::before {
            content: "←";
            font-size: 1.2em;
        }

    .info-box {
        background: #f0fdf4;
        border-left: 4px solid #16a34a;
        padding: 16px 20px;
        border-radius: 8px;
        margin-bottom: 30px;
    }

        .info-box p {
            margin: 0;
            color: #065f46;
            font-size: 0.9em;
            font-weight: 500;
        }

    .field-icon {
        position: relative;
    }

        .field-icon::before {
            content: attr(data-icon);
            position: absolute;
            left: 16px;
            top: 50%;
            transform: translateY(-50%);
            color: #9ca3af;
            font-size: 1.1em;
        }

        .field-icon .form-control {
            padding-left: 45px;
        }

    /* File Input Styling */
    input[type="file"].form-control {
        padding: 12px 16px;
        cursor: pointer;
    }

        input[type="file"].form-control::file-selector-button {
            padding: 8px 16px;
            background: #16a34a;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-weight: 600;
            margin-right: 12px;
            transition: all 0.3s ease;
        }

        input[type="file"].form-control:hover::file-selector-button {
            background: #15803d;
        }

    /* Responsive Design */
    @@media (max-width: 768px) {
        .form-container {
            padding: 30px 20px;
        }

        .page-header {
            padding: 30px 20px;
        }

            .page-header h1 {
                font-size: 1.6em;
            }

        .form-row {
            grid-template-columns: 1fr;
        }

        .btn-group {
            flex-direction: column;
        }

        .btn {
            width: 100%;
        }
    }

    /* Animation */
    @@keyframes fadeIn {
        from {
            opacity: 0;
            transform: translateY(20px);
        }

        to {
            opacity: 1;
            transform: translateY(0);
        }
    }

    .form-container {
        animation: fadeIn 0.5s ease-out;
    }
</style>

<style>
    * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
    }

    /* body {
        font-family: "Inter", -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        min-height: 100vh;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 20px;
    } */

    .video-container {
        background: white;
        border-radius: 16px;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        overflow: hidden;
        max-width: 900px;
        width: 100%;
        animation: fadeIn 0.6s ease-out;
    }

    .video-header {
        background: linear-gradient(135deg, #16a34a 0%, #15803d 100%);
        padding: 30px;
        text-align: center;
    }

        .video-header h1 {
            color: white;
            font-size: 2em;
            font-weight: 700;
            margin: 0;
            letter-spacing: -0.5px;
        }

        .video-header p {
            color: rgba(255, 255, 255, 0.9);
            margin-top: 10px;
            font-size: 1em;
        }

    .video-wrapper {
        position: relative;
        padding: 40px;
        background: #f9fafb;
    }

    .video-player {
        position: relative;
        width: 100%;
        border-radius: 12px;
        overflow: hidden;
        box-shadow: 0 8px 24px rgba(0, 0, 0, 0.15);
    }

    video {
        width: 100%;
        height: auto;
        display: block;
        background: #000;
    }

    .video-controls-info {
        margin-top: 25px;
        padding: 20px;
        background: white;
        border-radius: 8px;
        border: 2px solid #e5e7eb;
    }

        .video-controls-info h3 {
            color: #374151;
            font-size: 1.1em;
            margin-bottom: 12px;
            font-weight: 600;
        }

        .video-controls-info ul {
            list-style: none;
            padding: 0;
        }

        .video-controls-info li {
            color: #6b7280;
            padding: 8px 0;
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 0.95em;
        }

            .video-controls-info li::before {
                content: "▶";
                color: #16a34a;
                font-size: 0.8em;
            }

    .video-info-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
        gap: 20px;
        margin-top: 20px;
    }

    .info-card {
        background: white;
        padding: 20px;
        border-radius: 8px;
        border: 2px solid #e5e7eb;
        text-align: center;
    }

    .info-card-icon {
        font-size: 2em;
        margin-bottom: 10px;
    }

    .info-card-label {
        color: #6b7280;
        font-size: 0.85em;
        text-transform: uppercase;
        letter-spacing: 0.5px;
        font-weight: 600;
        margin-bottom: 5px;
    }

    .info-card-value {
        color: #374151;
        font-size: 1.3em;
        font-weight: 700;
    }

    @@keyframes fadeIn {
        from

    {
        opacity: 0;
        transform: translateY(30px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }

    }

    /* Custom Video Controls Styling */
    video::-webkit-media-controls-panel {
        background: linear-gradient(transparent, rgba(0, 0, 0, 0.8));
    }

    video::-webkit-media-controls-play-button {
        background-color: #16a34a;
        border-radius: 50%;
    }

    @@media (max-width: 768px) {
        .video-header h1

    {
        font-size: 1.5em;
    }

    .video-wrapper {
        padding: 20px;
    }

    .video-info-grid {
        grid-template-columns: 1fr;
    }

    }
</style>

<style>
    /* Professional Checkbox Styling */
    .form-group {
        margin-bottom: 1rem;
    }

    .checkbox-wrapper {
        display: flex;
        align-items: center;
        gap: 12px;
        cursor: pointer;
        user-select: none;
    }

        .checkbox-wrapper input[type="checkbox"] {
            position: absolute;
            opacity: 0;
            cursor: pointer;
            height: 0;
            width: 0;
        }

    .checkbox-custom {
        position: relative;
        height: 22px;
        width: 22px;
        background-color: #fff;
        border: 2px solid #d1d5db;
        border-radius: 4px;
        transition: all 0.3s ease;
        flex-shrink: 0;
    }

    .checkbox-wrapper:hover .checkbox-custom {
        border-color: #3b82f6;
    }

    .checkbox-wrapper input[type="checkbox"]:checked ~ .checkbox-custom {
        background-color: #3b82f6;
        border-color: #3b82f6;
    }

    .checkbox-wrapper input[type="checkbox"]:focus ~ .checkbox-custom {
        box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
        outline: none;
    }

    .checkbox-custom::after {
        content: "";
        position: absolute;
        display: none;
        left: 7px;
        top: 3px;
        width: 5px;
        height: 10px;
        border: solid white;
        border-width: 0 2px 2px 0;
        transform: rotate(45deg);
    }

    .checkbox-wrapper input[type="checkbox"]:checked ~ .checkbox-custom::after {
        display: block;
    }

    .checkbox-label {
        font-size: 14px;
        font-weight: 500;
        color: #374151;
        cursor: pointer;
    }

    /* Disabled state */
    .checkbox-wrapper input[type="checkbox"]:disabled ~ .checkbox-custom {
        background-color: #f3f4f6;
        border-color: #e5e7eb;
        cursor: not-allowed;
    }

    .checkbox-wrapper input[type="checkbox"]:disabled ~ .checkbox-label {
        color: #9ca3af;
        cursor: not-allowed;
    }
</style>

<div class="container-wrapper">
   

    <div class="form-container">
        <div class="info-box">
            <p>📋 Fill in all required fields marked with an asterisk (*) to edit a new contestant profile.</p>
        </div>
        @if (Model.Errors.Any())
        {
            <div class="alert alert-danger" style="padding:20px">
                <ul>
                    @foreach (var item in Model.Errors)
                    {
                        <li>@item</li>
                    }
                </ul>
            </div>
        }


        <form asp-action="Edit" enctype="multipart/form-data">
            <div asp-validation-summary="ModelOnly" class="text-danger validation-summary-errors"></div>
            <input type="hidden" asp-for="Id"/>
            <div class="form-section">

                <div class="form-row">
                    <div class="form-group">
                        <label asp-for="PassportFile" class="control-label">Passport Photo</label>
                        <img src="/Passports/@Model.PassportFileName" width="200" class="img img-thumbnail"/>
                        <input asp-for="PassportFile" class="form-control" type="file" style="height:50px;" accept="image/*" />
                        <span asp-validation-for="PassportFile" class="text-danger"></span>
                    </div>

                    <div class="form-group" style="display: flex; flex-direction: column; justify-content: flex-end; min-height: 100px;">
                        <label asp-for="StateId" class="control-label">State</label>
                        <select asp-for="StateId" style="width: 100%;
        padding: 14px 16px;
        border: 2px solid #e5e7eb;
        border-radius: 8px;
        font-size: 0.95em;
        transition: all 0.3s ease;
        outline: none;
        font-family: inherit;" asp-items="Model.States">
                            <option value="">--Select State--</option>
                        </select>
                        <span asp-validation-for="StateId" class="text-danger"></span>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label asp-for="Title" class="control-label">Title</label>
                        <select asp-for="Title" style="width: 100%;
                               padding: 14px 16px;
                               border: 2px solid #e5e7eb;
                               border-radius: 8px;
                               font-size: 0.95em;
                               transition: all 0.3s ease;
                               outline: none;
                               font-family: inherit;">
                            <option value="">None</option>
                            <option value="Alhaji">Alhaji</option>
                            <option value="Barr.">Barrister</option>
                            <option value="Chief">Chief</option>
                            <option value="Dr.">Doctor</option>
                            <option value="Engr.">Engineer</option>
                            <option value="Hon">Honourable</option>
                            <option value="Malam">Malam</option>
                            <option value="Pastor">Pastor</option>
                            <option value="Prince">Prince</option>
                            <option value="Prof.">Professor</option>
                            <option value="Rev. Fr">Reverend Fr</option>
                            <option value="Rt. Hon">Rt. Honourable</option>
                            <option value="Sen. Prince">Senator Prince</option>
                            <option value="Sen">Senator</option>
                            <option value="Sir">Sir</option>
                            <option value="LT. COL">LT. COL</option>
                        </select>
                        <span asp-validation-for="FirstName" class="text-danger"></span>
                    </div>

                    <div class="form-group">
                        <label asp-for="ElectionId" class="control-label">Election</label>
                        <input asp-for="ElectionId" readonly class="" style="width: 100%;
                               padding: 14px 16px;
                               border: 2px solid #e5e7eb;
                               border-radius: 8px;
                               font-size: 0.95em;
                               transition: all 0.3s ease;
                               outline: none;
                               font-family: inherit;" value="@Model.Election.Description" />
                        <span asp-validation-for="LastName" class="text-danger"></span>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label asp-for="FirstName" class="control-label">First Name</label>
                        <input asp-for="FirstName" class="" style="width: 100%;
                               padding: 14px 16px;
                               border: 2px solid #e5e7eb;
                               border-radius: 8px;
                               font-size: 0.95em;
                               transition: all 0.3s ease;
                               outline: none;
                               font-family: inherit;" placeholder="Enter first name" />
                        <span asp-validation-for="FirstName" class="text-danger"></span>
                    </div>

                    <div class="form-group">
                        <label asp-for="LastName" class="control-label">Last Name</label>
                        <input asp-for="LastName" class="" style="width: 100%;
                               padding: 14px 16px;
                               border: 2px solid #e5e7eb;
                               border-radius: 8px;
                               font-size: 0.95em;
                               transition: all 0.3s ease;
                               outline: none;
                               font-family: inherit;" placeholder="Enter last name" />
                        <span asp-validation-for="LastName" class="text-danger"></span>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label class="">
                            <br />
                            <input type="checkbox" asp-for="IsActive" />
                            <span class=""></span>
                            <span class="">Active Status (Check to activate candidate)</span>
                        </label>
                        <span asp-validation-for="IsActive" class="text-danger"></span>
                    </div>
                    <div class="form-group">
                        <label asp-for="Order" class="control-label">Order</label>
                        <input asp-for="Order" type="number" class="" style="width: 100%;
                               padding: 14px 16px;
                               border: 2px solid #e5e7eb;
                               border-radius: 8px;
                               font-size: 0.95em;
                               transition: all 0.3s ease;
                               outline: none;
                               font-family: inherit;" />
                        <span asp-validation-for="Order" class="text-danger"></span>
                    </div>
                </div>
               

                <input type="hidden" asp-for="ElectionId" />



            </div>

            <div class="btn-group">
                <button type="submit" class="btn btn-primary">
                    💾 Update Candidate
                </button>
                <a asp-action="Index" class="btn btn-secondary">
                    ✕ Cancel
                </a>
            </div>
        </form>
    </div>

    <a asp-action="Index" class="back-link">Back to Contestants List</a>
</div>
<script src="https://code.jquery.com/jquery-3.7.1.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.10.0/js/bootstrap-datepicker.min.js" integrity="sha512-LsnSViqQyaXpD4mBBdRYeP6sRwJiJveh2ZIbW41EBrNmKxgr/LFZIiWT6yr+nycvhvauz8c2nYMhrP80YhG7Cw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
@section Scripts {
    @{
        // await Html.RenderPartialAsync("_ValidationScriptsPartial");
    }
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-datepicker/1.9.0/js/bootstrap-datepicker.min.js"></script>

    <script>
        $(document).ready(function () {
                $('#dob').datepicker({
                format: 'yyyy-mm-dd',
                autoclose: true,
                todayHighlight: true,
                endDate: new Date(),
                startView: 'decade',
                maxViewMode: 2,
                orientation: 'bottom auto',
                templates: {
                    leftArrow: '←',
                    rightArrow: '→'
                }
            });

              });
    </script>
}